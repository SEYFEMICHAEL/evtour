OAM.ready((function(){arriveEach("[data-form-template]",(function(){var a=$(this);a.on("change",'select[name="group"]',(function(){var t=$(this),e=t.val(),n=a.find('select[name="template"]');n.find('option[value!=""]').remove(),e&&$.get(t.data("url"),{group:e}).done((function(t){$.each(dot2val.get(t,"data.templates",[]),(function(t,e){$("<option>").attr("value",t).attr("data-definition",JSON.stringify(e)).text(e.title).appendTo(n)}))})).fail((function(t){console.error(t)}))})),a.on("change",'select[name="template"]',(function(){var t=$(this),e=t.closest("form");t.find("option:selected").each((function(){var t=$(this).data("definition");t&&(e.find('[name="subject"]').val(t.subject),e.find('[name="body"]').val(t.body))}))}))}))}));