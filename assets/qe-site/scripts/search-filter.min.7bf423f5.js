!(function(n,o){var s="searchFilter",r="roam",l=r+"."+s,e="."+l,a={keyup:"keyup"+e,click:"click"+e};o[r]||(o[r]={}),o[r][s]=function(e,t){var i=this;i.$el=o(e),i.el=e,i.$body=o("body"),i.open=!1,i._bindOpenEvents=function(){i.$filterToggles.on(a.click,i.show)},i._unbindOpenEvents=function(){i.$filterToggles.off(a.click,i.show)},i._bindCloseEvents=function(){o(n).on(a.keyup,i._hideWithEscapeKey),i.$filterToggles.on(a.click,i.hide)},i._unbindCloseEvents=function(){o(n).off(a.keyup,i._hideWithEscapeKey),i.$filterToggles.off(a.click,i.hide)},i._hideWithEscapeKey=function(e){27===e.which&&i.hide()},i.show=function(e){void 0!==e&&e.preventDefault(),i.$body.addClass(i.options.bodyOpenClass),i.$el.wrap(o("<div />").addClass(i.options.wrapClass)),i._unbindOpenEvents(),i._bindCloseEvents(),i.open=!0},i.hide=function(){i.$body.removeClass(i.options.bodyOpenClass),i.$el.unwrap("."+i.options.wrapClass),i._unbindCloseEvents(),i._bindOpenEvents(),i.open=!1},i._bindGroupEvents=function(){i.$filterGroups.on(a.click,i.options.filterExpander,(function(e){o(e.delegateTarget).toggleClass("filter__list--expanded").toggleClass("filter__list--contracted")}))},i.init=function(){i.options=o.extend(!0,{},o[r][s].defaultOptions,t),i.$filterToggles=o(i.options.filterToggle),i.$filterGroups=o(i.options.filterGroup),i.$filterGroups.each((function(){var e=o(this);e.data("search-filter-group-count")>i.options.expandMinSize?(e.children(i.options.filterItem).filter('[data-search-filter-item-active="0"]').sort((function(e,t){return o(e).data("search-filter-item-count")<o(t).data("search-filter-item-count")?1:-1})).filter(":gt("+(i.options.expandMinSize-1)+")").addClass("filter__list-item--below-min-threshold"),e.addClass("filter__list--contracted")):e.children(i.options.filterExpander).remove()})),i._bindOpenEvents(),i._bindGroupEvents()},i.init()},o[r][s].breakpoints={},o[r][s].defaultOptions={wrapClass:"filters-overlay",bodyOpenClass:"modal-open",filterToggle:"[data-search-filter-toggle]",expandMinSize:5,filterGroup:"[data-search-filter-group]",filterItem:"[data-search-filter-item]",filterExpander:"[data-search-filter-expander]"},o.fn.roam_searchFilter=function(t){var i,n=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=o.data(this,l);e||(e=o.isPlainObject(t)&&0===n.length?new o[r][s](this,t):new o[r][s](this),o.data(this,l,e)),"string"==typeof t&&"function"==typeof e[t]&&(i=e[t].apply(e,n))})),void 0!==i?i:this}})((window,document),jQuery),OAM.ready((function(){$("[data-search-filter]").roam_searchFilter({})}));