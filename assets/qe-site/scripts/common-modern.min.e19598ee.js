"use strict";!(function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.ResizeSensor=t()})("undefined"!=typeof window?window:this,(function(){if("undefined"==typeof window)return null;var t="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),S=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},i=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||function(e){t.clearTimeout(e)};function r(e,t){var n=Object.prototype.toString.call(e),o="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,i=0,r=e.length;if(o)for(;i<r;i++)t(e[i]);else t(e)}function x(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function _(t,n){Object.keys(n).forEach((function(e){t.style[e]=n[e]}))}var n,a=function(t,n){var y=0;function C(){var n,o,i=[];this.add=function(e){i.push(e)},this.call=function(e){for(n=0,o=i.length;n<o;n++)i[n].call(this,e)},this.remove=function(e){var t=[];for(n=0,o=i.length;n<o;n++)i[n]!==e&&t.push(i[n]);i=t},this.length=function(){return i.length}}function o(n,e){var t,o,i,r,a,s,l,c,u,d,f,h,g,p,v,m,b,w;n&&(n.resizedAttached?n.resizedAttached.add(e):(n.resizedAttached=new C,n.resizedAttached.add(e),n.resizeSensor=document.createElement("div"),n.resizeSensor.dir="ltr",n.resizeSensor.className="resize-sensor",t={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},o={position:"absolute",left:"0px",top:"0px",transition:"0s"},_(n.resizeSensor,t),(i=document.createElement("div")).className="resize-sensor-expand",_(i,t),_(r=document.createElement("div"),o),i.appendChild(r),(a=document.createElement("div")).className="resize-sensor-shrink",_(a,t),_(s=document.createElement("div"),o),_(s,{width:"200%",height:"200%"}),a.appendChild(s),n.resizeSensor.appendChild(i),n.resizeSensor.appendChild(a),n.appendChild(n.resizeSensor),"absolute"!==(c=(l=window.getComputedStyle(n))?l.getPropertyValue("position"):null)&&"relative"!==c&&"fixed"!==c&&"sticky"!==c&&(n.style.position="relative"),u=!1,d=0,f=x(n),p=!(g=h=0),y=0,v=function(){if(p){if(0===n.offsetWidth&&0===n.offsetHeight)return void(y=y||S((function(){y=0,v()})));p=!1}var e,t;e=n.offsetWidth,t=n.offsetHeight,r.style.width=e+10+"px",r.style.height=t+10+"px",i.scrollLeft=e+10,i.scrollTop=t+10,a.scrollLeft=e+10,a.scrollTop=t+10},n.resizeSensor.resetSensor=v,m=function(){d=0,u&&(h=f.width,g=f.height,n.resizedAttached&&n.resizedAttached.call(f))},(w=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)})(i,"scroll",b=function(){f=x(n),(u=f.width!==h||f.height!==g)&&!d&&(d=S(m)),v()}),w(a,"scroll",b),y=S((function(){y=0,v()}))))}r(t,(function(e){o(e,n)})),this.detach=function(e){y||(i(y),y=0),a.detach(t,e)},this.reset=function(){t.resizeSensor.resetSensor()}};return a.reset=function(e){r(e,(function(e){e.resizeSensor.resetSensor()}))},a.detach=function(e,t){r(e,(function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},"undefined"!=typeof MutationObserver&&(n=new MutationObserver(function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t].addedNodes,o=0;o<n.length;o++)n[o].resizeSensor&&a.reset(n[o])}),document.addEventListener("DOMContentLoaded",(function(e){n.observe(document.body,{childList:!0,subtree:!0})}))),a})),(function(e){var n=-1,r={onVisible:function(n){var e=r.isSupported();if(!e||!r.hidden())return n(),e;var o=r.change((function(e,t){r.hidden()||(r.unbind(o),n())}));return o},change:function(e){if(!r.isSupported())return!1;var t=n+=1;return r._callbacks[t]=e,r._listen(),t},unbind:function(e){delete r._callbacks[e]},afterPrerendering:function(n){var e=r.isSupported(),o="prerender";if(!e||o!=r.state())return n(),e;var i=r.change((function(e,t){o!=t&&(r.unbind(i),n())}));return i},hidden:function(){return!(!r._doc.hidden&&!r._doc.webkitHidden)},state:function(){return r._doc.visibilityState||r._doc.webkitVisibilityState||"visible"},isSupported:function(){return void 0!==r._doc.hidden||void 0!==r._doc.webkitHidden},_doc:document||{},_callbacks:{},_change:function(e){var t,n=r.state();for(t in r._callbacks)r._callbacks[t].call(r._doc,e,n)},_listen:function(){var e,t;r._init||(e="visibilitychange",r._doc.webkitVisibilityState&&(e="webkit"+e),t=function(){r._change.apply(r,arguments)},r._doc.addEventListener?r._doc.addEventListener(e,t):r._doc.attachEvent(e,t),r._init=!0)}};"undefined"!=typeof module&&module.exports?module.exports=r:e.Visibility=r})(this),(function(e){var t,n,o,i;e.visibilityState||e.webkitVisibilityState||(e.hidden=!1,e.visibilityState="visible",t=null,n=function(){e.createEvent?(t||(t=e.createEvent("HTMLEvents")).initEvent("visibilitychange",!0,!0),e.dispatchEvent(t)):"object"==typeof Visibility&&Visibility._change.call(Visibility,{})},o=function(){e.hidden=!1,e.visibilityState="visible",n()},i=function(){e.hidden=!0,e.visibilityState="hidden",n()},e.addEventListener?(window.addEventListener("focus",o,!0),window.addEventListener("blur",i,!0)):(e.attachEvent("onfocusin",o),e.attachEvent("onfocusout",i)))})(document),(function(o,i,r,a){var s="visibility",l="roam",c=l+"."+s,e="."+c,u={show:"show"+e,hide:"hide"+e,resize:"resize"+e,scroll:"scroll"+e},d=!1;r[l]||(r[l]={}),r[l][s]=function(e,t){var n=this;n.$el=r(e),n.el=e,n.listener=null,n.visible=null,n._pageVisibilityChanged=function(){n._triggerVisibilityEventIfChanged()},n._pageScrolled=function(){n._triggerVisibilityEventIfChanged()},n._pageResized=function(){n._triggerVisibilityEventIfChanged()},n._triggerVisibilityEventIfChanged=function(){var e=n.elementVisible();e!==n.visible&&(n.visible=e,n.$el.trigger(n.visible?u.show:u.hide))},n._triggerVisibilityEvent=function(){n.$el.trigger(n.visible?u.show:u.hide)},n.pageVisible=function(){return!a.hidden()},n.elementVisible=function(){return n.pageVisible()&&n.$el.isInViewport({partially:!0,excludeHidden:!0})},n.watch=function(){null===n.listener&&(n.listener=a.change(n._pageVisibilityChanged),r(o).on(u.resize,r.debounceLast(25,n._pageResized)),r(i).on(u.scroll,r.debounceLast(25,n._pageScrolled)),n._triggerVisibilityEvent(),r(o).trigger("resize"))},n.unwatch=function(){null!==n.listener&&(a.unbind(n.listener),n.listener=null,r(o).off(u.resize,n._pageResized),r(i).off(u.scroll,n._pageScrolled))},n._initResizeSensor=function(){d=d||new ResizeSensor(r("body"),function(){r(o).trigger("resize")})},n.init=function(){n._initResizeSensor(),n.options=r.extend(!0,{},r[l][s].defaultOptions,t)},n.init()},r[l][s].defaultOptions={},r.fn.roam_visibility=function(t){var n,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=r.data(this,c);e||(e=r.isPlainObject(t)&&0===o.length?new r[l][s](this,t):new r[l][s](this),r.data(this,c,e)),"string"==typeof t&&"function"==typeof e[t]&&(n=e[t].apply(e,o))})),void 0!==n?n:this}})(window,document,jQuery,Visibility),(function(h){var r,c=!!window.getComputedStyle,a=window,s=h(window);function u(e,t){var n,o,i,r,a,s,l,c={target:{}},u={},d={},f=e[0];if(e=e.eq(0),t=t||"both",c.getBoth="both"===t,c.getHorizontal="horizontal"===t||c.getBoth,c.getVertical="vertical"===t||c.getBoth,"horizontal"!==t&&"vertical"!==t&&"both"!==t)throw new Error("Invalid parameter value: axis = "+t);if(e.length)return c.target.isWindow=h.isWindow(f),c.target.isWindow?d.document=f.document:9===f.nodeType?(d.document=f,c.target.isWindow=!0):f===f.ownerDocument.documentElement?(d.document=f.ownerDocument,c.target.isWindow=!0):1===f.nodeType&&"iframe"===f.tagName.toLowerCase()?(d.document=f.contentDocument||f.contentWindow.document,c.target.isWindow=!0):f===f.ownerDocument.body&&(d.document=f.ownerDocument,c.target.isBody=!0),(c.target.isWindow||c.target.isBody)&&(d.window=d.document.defaultView||d.document.parentWindow,d.$document=h(d.document),d.documentElement=d.document.documentElement,d.body=d.document.body,f=e=void 0),c.target.isWindow?u=(function(e,t){var n,o,i,r=h.scrollbarWidth(),a={},s=!e.getHorizontal,l=!e.getVertical;e.getHorizontal&&0<r&&10<(n=t.window.innerHeight)&&(a.horizontal=n>t.documentElement.clientHeight,s=!0);e.getVertical&&0<r&&10<(o=t.window.innerWidth)&&(a.vertical=o>t.documentElement.clientWidth,l=!0);s&&l||(i=p(e,t).window,!s&&i.overflowScrollX&&(a.horizontal=s=!0),!l&&i.overflowScrollY&&(a.vertical=l=!0),!s&&i.overflowHiddenX&&(a.horizontal=!1,s=!0),!l&&i.overflowHiddenY&&(a.vertical=!1,l=!0),s||(a.horizontal=t.documentElement.clientWidth<h.documentWidth(t.document)),l||(a.vertical=t.documentElement.clientHeight<h.documentHeight(t.document)));return a})(c,d):c.target.isBody?(i=p(c,d).body,n=h(d.body),c.getHorizontal&&(u.horizontal=i.overflowScrollX||i.overflowAutoX&&d.body.clientHeight<n.height()),c.getVertical&&(u.vertical=i.overflowScrollY||i.overflowAutoY&&d.body.clientWidth<n.width())):(o=v(y(f,["overflow","overflowX","overflowY"],{toLowerCase:!0}),!0),s=f.scrollWidth,l=f.scrollHeight,u.horizontal=0<s&&(o.overflowScrollX||o.overflowAutoX&&(r=e.innerWidth())<s),u.vertical=0<l&&(o.overflowScrollY||o.overflowAutoY&&(a=e.innerHeight())<l),u.vertical=u.vertical||u.horizontal&&o.overflowAutoY&&(void 0!==a?a:e.innerHeight())-h.scrollbarWidth()<l,u.horizontal=u.horizontal||u.vertical&&o.overflowAutoX&&(void 0!==r?r:e.innerWidth())-h.scrollbarWidth()<s),c.getBoth?u:c.getHorizontal?u.horizontal:u.vertical}function o(e,t){var n,o,i,r=h.scrollbarWidth(),a="both"===(t=t||"both"),s="horizontal"===t||a,l="vertical"===t||a;if("horizontal"!==t&&"vertical"!==t&&"both"!==t)throw new Error("Invalid parameter value: axis = "+t);if(e.length)return 0===r?a?{horizontal:0,vertical:0}:0:(n=a?u(e):s?{horizontal:u(e,"horizontal")}:{vertical:u(e,"vertical")},s&&(o=n.horizontal?r:0),l&&(i=n.vertical?r:0),a?{horizontal:o,vertical:i}:s?o:i)}function l(e){var t=e[0],n=t&&(9===t.nodeType?t:t.ownerDocument);return n&&(n.defaultView||n.parentWindow)||h.isWindow(t)&&t||void 0}function d(e,t,n){var o,i=[];return e.length?(o=f(e,t,n),m(e[0],o.container),e.each((function(){g(this,o)&&i.push(this)})),h(i)):h()}function n(e,t,n){var o,i=e[0];return!!e.length&&(m(i,(o=f(e,t,n)).container),g(i,o))}function f(e,t,n){var o,i,r={};return n=n||{},t=t||l(e),r.$container=o=(function e(t){var n,o=t instanceof h;if(!(o||h.isWindow(t)||t.nodeType||S(t)))throw new Error("Invalid container: not a window, node, jQuery object or selector string");n=o?t:t===a?s:h(t);if(!n.length)throw new Error("Invalid container: empty jQuery object");t=n[0];9===t.nodeType?n=e(t.defaultView||t.parentWindow):1===t.nodeType&&"iframe"===t.tagName.toLowerCase()&&(n=e(t.contentWindow));if(!h.isWindow(n[0])&&"visible"===n.css("overflow"))throw new Error("Invalid container: is set to overflow:visible. Containers must have the ability to obscure some of their content, otherwise the in-view test is pointless. Containers must be set to overflow:scroll/auto/hide, or be a window (or document, or iframe, as proxies for a window)");return n})(t),r.container=t=o[0],(function(e){var t,n;if(e.direction&&"vertical"!==e.direction&&"horizontal"!==e.direction&&"both"!==e.direction)throw new Error('Invalid option value: direction = "'+e.direction+'"');if(e.box&&"border-box"!==e.box&&"content-box"!==e.box)throw new Error('Invalid option value: box = "'+e.box+'"');if(void 0!==e.tolerance&&(t=C(e.tolerance),n=S(e.tolerance)&&/^[+-]?\d*\.?\d+(px|%)?$/.test(e.tolerance),!t&&!n))throw new Error('Invalid option value: tolerance = "'+e.tolerance+'"')})(n),i=n.direction||"both",r.useVertical="both"===i||"vertical"===i,r.useHorizontal="both"===i||"horizontal"===i,r.partially=n.partially,r.excludeHidden=n.excludeHidden,r.borderBox="content-box"!==n.box,r.containerIsWindow=h.isWindow(t),void 0!==n.tolerance?(r.toleranceType=C(n.tolerance)||"px"===n.tolerance.slice(-3)?"add":"multiply",r.tolerance="add"===r.toleranceType?parseFloat(n.tolerance):parseFloat(n.tolerance)/100+1):(r.tolerance=0,r.toleranceType="add"),r.cache={},r}function g(e,t){var n,o,i,r,a,s,l,c,u=t.container,d=t.$container,f=t.cache,h=!0;if(e===u)throw new Error("Invalid container: is the same as the element");return(!t.excludeHidden||0<e.offsetWidth&&0<e.offsetHeight)&&(t.useHorizontal&&(n=(function(e,t,n){var o;n&&void 0!==n.netContainerWidth?o=n.netContainerWidth:(o=t?w(e,"Width"):e.innerWidth()-b(e,n).vertical,n&&(n.netContainerWidth=o));return o})(d,t.containerIsWindow,f)),t.useVertical&&(o=(function(e,t,n){var o;n&&void 0!==n.netContainerHeight?o=n.netContainerHeight:(o=t?w(e,"Height"):e.innerHeight()-b(e,n).horizontal,n&&(n.netContainerHeight=o));return o})(d,t.containerIsWindow,f)),i=void 0!==f.hTolerance?f.hTolerance:f.hTolerance="add"===t.toleranceType?t.tolerance:n*t.tolerance,r=void 0!==f.vTolerance?f.vTolerance:f.vTolerance="add"===t.toleranceType?t.tolerance:o*t.tolerance,a=t.borderBox?e.getBoundingClientRect():(l=(s=e).getBoundingClientRect(),c=y(s,["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft"],{toFloat:!0}),{top:l.top+c.paddingTop+c.borderTopWidth,right:l.right-(c.paddingRight+c.borderRightWidth),bottom:l.bottom-(c.paddingBottom+c.borderBottomWidth),left:l.left+c.paddingLeft+c.borderLeftWidth}),t.containerIsWindow||(a=(function(e,t,n){var o;n&&n.containerPaddingRectRoot?o=n.containerPaddingRectRoot:(o=(function(e){var t=e.getBoundingClientRect(),n=y(e,["borderTopWidth","borderLeftWidth"],{toFloat:!0});return{top:t.top+n.borderTopWidth,left:t.left+n.borderLeftWidth}})(t[0]),n&&(n.containerPaddingRectRoot=o));return{top:e.top-o.top,bottom:e.bottom-o.top,left:e.left-o.left,right:e.right-o.left}})(a,d,f)),t.partially?(t.useVertical&&(h=a.top<o+r&&a.bottom>-r),t.useHorizontal&&(h=h&&a.left<n+i&&a.right>-i)):(t.useVertical&&(h=a.top>=-r&&a.top<o+r&&a.bottom>-r&&a.bottom<=o+r),t.useHorizontal&&(h=h&&a.left>=-i&&a.left<n+i&&a.right>-i&&a.right<=n+i)),h)}function p(e,t){var n=["overflow"],o=["overflow"];return e.getHorizontal&&(n.push("overflowX"),o.push("overflowX")),e.getVertical&&(n.push("overflowY"),o.push("overflowY")),(function(e,t){var n=v(e,!1),o=v(t,!1),i={window:{},body:{}};"visible"===n.overflowX?(i.body.overflowX="visible",i.window.overflowX=o.overflowX):(i.body.overflowX=o.overflowX,i.window.overflowX=n.overflowX);"visible"===n.overflowY?(i.body.overflowY="visible",i.window.overflowY=o.overflowY):(i.body.overflowY=o.overflowY,i.window.overflowY=n.overflowY);"visible"===i.window.overflowX&&(i.window.overflowX="auto");"visible"===i.window.overflowY&&(i.window.overflowY="auto");!(function(){void 0===r&&(r=/iPad|iPhone|iPod/g.test(navigator.userAgent));return r})()||("hidden"===i.window.overflowX&&(i.window.overflowX="auto"),"hidden"===i.window.overflowY&&(i.window.overflowY="auto"));return i.window=v(i.window,!0),i.body=v(i.body,!0),i})(y(t.documentElement,n,{toLowerCase:!0}),y(t.body,o,{toLowerCase:!0}))}function v(e,t){var o={};return o.overflowX=e.overflowX||e.overflow||"visible",o.overflowY=e.overflowY||e.overflow||"visible",t&&h.each(["Visible","Auto","Scroll","Hidden"],(function(e,t){var n=t.toLowerCase();o["overflow"+t+"X"]=o.overflowX===n,o["overflow"+t+"Y"]=o.overflowY===n})),o}function m(e,t){if(1!==e.nodeType)throw new Error("Invalid node: is not an element");if(!(h.isWindow(t)?e.ownerDocument&&t===(e.ownerDocument.defaultView||e.ownerDocument.parentWindow):9===t.nodeType?h.contains(t.documentElement,e):h.contains(t,e)))throw new Error("Invalid container: is not an ancestor of the element")}function b(e,t){var n;return t&&t.containerScrollbarWidths?n=t.containerScrollbarWidths:(n=o(e),t&&(t.containerScrollbarWidths=n)),n}function w(e,t){var n=e[0].document,o="client"+t;return"BackCompat"===n.compatMode?n.body[o]:n.documentElement[o]}function y(e,t,n){var o,i,r,a={},s=e.ownerDocument.defaultView||e.ownerDocument.parentWindow,l=c?s.getComputedStyle(e,null):e.currentStyle;for(n=n||{},h.isArray(t)||(t=[t]),i=t.length,o=0;o<i;o++)a[r=t[o]]=h.css(e,r,!1,l),n.toLowerCase&&a[r]&&a[r].toLowerCase&&(a[r]=a[r].toLowerCase()),n.toFloat&&(a[r]=parseFloat(a[r]));return a}function C(e){return("number"==typeof e||e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)||!1)&&e===+e}function S(e){return"string"==typeof e||e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)||!1}h.fn.hasScrollbar=function(e){return u(this,e)},h.fn.scrollbarWidth=function(e){return o(this,e)},h.fn.ownerWindow=function(){return l(this)},h.fn.inView=function(e,t){return d(this,e,t)},h.fn.inViewport=function(e){return d(this,l(this),e)},h.fn.isInView=function(e,t){return n(this,e,t)},h.fn.isInViewport=function(e){return n(this,l(this),e)},h.expr.match.inviewport=/^(?:inVieport)$/i,h.expr.setFilters.inviewport=function(e,t,n){var o=h(e),i=d(o,l(o));return n?o.not(i):i}})("undefined"!=typeof jQuery?jQuery:$);var Arrive=(function(c,e,u){if(c.MutationObserver&&"undefined"!=typeof HTMLElement){var n,o=0,d=(n=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector,{matchesSelector:function(e,t){return e instanceof HTMLElement&&n.call(e,t)},addMethod:function(e,t,n){var o=e[t];e[t]=function(){return n.length==arguments.length?n.apply(this,arguments):"function"==typeof o?o.apply(this,arguments):void 0}},callCallbacks:function(e,t){t&&t.options.onceOnly&&1==t.firedElems.length&&(e=[e[0]]);for(var n,o=0;n=e[o];o++)n&&n.callback&&n.callback.call(n.elem,n.elem);t&&t.options.onceOnly&&1==t.firedElems.length&&t.me.unbindEventWithSelectorAndCallback.call(t.target,t.selector,t.callback)},checkChildNodesRecursively:function(e,t,n,o){for(var i,r=0;i=e[r];r++)n(i,t,o)&&o.push({callback:t.callback,elem:i}),0<i.childNodes.length&&d.checkChildNodesRecursively(i.childNodes,t,n,o)},mergeArrays:function(e,t){var n,o={};for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);return o},toElementsArray:function(e){return void 0===e||"number"==typeof e.length&&e!==c||(e=[e]),e}}),t=(l.prototype.addEvent=function(e,t,n,o){var i={target:e,selector:t,options:n,callback:o,firedElems:[]};return this._beforeAdding&&this._beforeAdding(i),this._eventsBucket.push(i),i},l.prototype.removeEvent=function(e){for(var t,n,o=this._eventsBucket.length-1;t=this._eventsBucket[o];o--){e(t)&&(this._beforeRemoving&&this._beforeRemoving(t),(n=this._eventsBucket.splice(o,1))&&n.length&&(n[0].callback=null))}},l.prototype.beforeAdding=function(e){this._beforeAdding=e},l.prototype.beforeRemoving=function(e){this._beforeRemoving=e},l),a=function(i,r){var a=new t,s=this,l={fireOnAttributesModification:!1};return a.beforeAdding((function(t){var e,n=t.target;n!==c.document&&n!==c||(n=document.getElementsByTagName("html")[0]),e=new MutationObserver(function(e){r.call(this,e,t)});var o=i(t.options);e.observe(n,o),t.observer=e,t.me=s})),a.beforeRemoving((function(e){e.observer.disconnect()})),this.bindEvent=function(e,t,n){t=d.mergeArrays(l,t);for(var o=d.toElementsArray(this),i=0;i<o.length;i++)a.addEvent(o[i],e,t,n)},this.unbindEvent=function(){var n=d.toElementsArray(this);a.removeEvent((function(e){for(var t=0;t<n.length;t++)if(this===u||e.target===n[t])return!0;return!1}))},this.unbindEventWithSelectorOrCallback=function(n){var o=d.toElementsArray(this),i=n,e="function"==typeof n?function(e){for(var t=0;t<o.length;t++)if((this===u||e.target===o[t])&&e.callback===i)return!0;return!1}:function(e){for(var t=0;t<o.length;t++)if((this===u||e.target===o[t])&&e.selector===n)return!0;return!1};a.removeEvent(e)},this.unbindEventWithSelectorAndCallback=function(n,o){var i=d.toElementsArray(this);a.removeEvent((function(e){for(var t=0;t<i.length;t++)if((this===u||e.target===i[t])&&e.selector===n&&e.callback===o)return!0;return!1}))},this},i=new function(){var l={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function r(e,t,n){return!(!d.matchesSelector(e,t.selector)||(e._id===u&&(e._id=o++),-1!=t.firedElems.indexOf(e._id)))&&(t.firedElems.push(e._id),!0)}var c=(i=new a(function(e){var t={attributes:!1,childList:!0,subtree:!0};return e.fireOnAttributesModification&&(t.attributes=!0),t},function(e,i){e.forEach((function(e){var t=e.addedNodes,n=e.target,o=[];null!==t&&0<t.length?d.checkChildNodesRecursively(t,i,r,o):"attributes"===e.type&&r(n,i)&&o.push({callback:i.callback,elem:n}),d.callCallbacks(o,i)}))})).bindEvent;return i.bindEvent=function(e,t,n){t=void 0===n?(n=t,l):d.mergeArrays(l,t);var o=d.toElementsArray(this);if(t.existing){for(var i=[],r=0;r<o.length;r++)for(var a=o[r].querySelectorAll(e),s=0;s<a.length;s++)i.push({callback:n,elem:a[s]});if(t.onceOnly&&i.length)return n.call(i[0].elem,i[0].elem);setTimeout(d.callCallbacks,1,i)}c.call(this,e,t,n)},i},s=new function(){var o={};function i(e,t){return d.matchesSelector(e,t.selector)}var r=(s=new a(function(){return{childList:!0,subtree:!0}},function(e,o){e.forEach((function(e){var t=e.removedNodes,n=[];null!==t&&0<t.length&&d.checkChildNodesRecursively(t,o,i,n),d.callCallbacks(n,o)}))})).bindEvent;return s.bindEvent=function(e,t,n){t=void 0===n?(n=t,o):d.mergeArrays(o,t),r.call(this,e,t,n)},s};e&&h(e.fn),h(HTMLElement.prototype),h(NodeList.prototype),h(HTMLCollection.prototype),h(HTMLDocument.prototype),h(Window.prototype);var r={};return f(i,r,"unbindAllArrive"),f(s,r,"unbindAllLeave"),r}function l(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null}function f(e,t,n){d.addMethod(t,n,e.unbindEvent),d.addMethod(t,n,e.unbindEventWithSelectorOrCallback),d.addMethod(t,n,e.unbindEventWithSelectorAndCallback)}function h(e){e.arrive=i.bindEvent,f(i,e,"unbindArrive"),e.leave=s.bindEvent,f(s,e,"unbindLeave")}})(window,"undefined"==typeof jQuery?null:jQuery,void 0);!(function(n,o){window.arriveEach=function(e,t){o(e).each(t),OAM.isExtremeDataSavingBrowser()||o(n).arrive(e,t)}})(document,jQuery),(function(i){var r="blockButton",a="roam",s=a+"."+r,o="timeout",l="complete",c="error",u="success",d="loading";i[a]||(i[a]={}),i[a][r]=function(e,t){var n=this;n.$el=i(e),n.el=e,n.timer=null,n.state="complete",n._cancelTimer=function(){clearTimeout(n.timer)},n._loadingTimer=function(e){n._cancelTimer(),n.timer=setTimeout(n._timeout,e)},n._timeout=function(){n._stripClasses(),n.state=o},n._stripClasses=function(){n.$el.removeClass(n.options.loadingClass).removeClass(n.options.successClass).removeClass(n.options.errorClass)},n._setState=function(e){n.state=e},n.loading=function(){n.state!==d&&(n.$el.addClass(n.options.loadingClass).removeClass(n.options.successClass).removeClass(n.options.errorClass),n._setState(d)),n._loadingTimer(n.options.loadingTimeout)},n.success=function(){n.state!==u&&(n.$el.addClass(n.options.loadingClass).addClass(n.options.successClass).removeClass(n.options.errorClass),n._setState(u)),n._loadingTimer(n.options.successTimeout)},n.error=function(){n.state!==c&&(n.$el.addClass(n.options.loadingClass).removeClass(n.options.successClass).addClass(n.options.errorClass),n._setState(c)),n._loadingTimer(n.options.errorTimeout)},n.complete=function(){n.state!==l&&(n._stripClasses(),n._cancelTimer(),n._setState(l))},n.init=function(){n.options=i.extend(!0,{},i[a][r].defaultOptions,t)},n.init()},i[a][r].defaultOptions={loadingTimeout:2e4,successTimeout:2e3,errorTimeout:2e3,loadingClass:"btn-loading",successClass:"btn-loading--success",errorClass:"btn-loading--error"},i.fn.roam_blockButton=function(t){var n,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=i.data(this,s);e||(e=i.isPlainObject(t)&&0===o.length?new i[a][r](this,t):new i[a][r](this),i.data(this,s,e)),"string"==typeof t&&"function"==typeof e[t]&&(n=e[t].apply(e,o))})),void 0!==n?n:this}})((window,document,jQuery)),OAM.isRegularDataSavingBrowser()||OAM.ready((function(){$("body").on("submit","[data-form-blocking]",(function(e){e.isDefaultPrevented()||$(e.target).find("button.btn").roam_blockButton("loading")})).on("ajax:send","[data-form-blocking]",(function(e){$(e.target).find("button.btn").roam_blockButton("loading")})).on("ajax:success","[data-form-blocking]",(function(e){$(e.target).find("button.btn").roam_blockButton("success")})).on("ajax:error","[data-form-blocking]",(function(e){$(e.target).find("button.btn").roam_blockButton("error")})).on("ajax:complete","[data-form-blocking]",(function(e){setTimeout((function(){$(e.target).find("button.btn").roam_blockButton("complete")}),2e3)})).on("click","[data-btn-blocking]",(function(e){e.isDefaultPrevented()||$(e.target).roam_blockButton("loading")}))})),OAM.ready((function(){var e=$("[data-slider]");e.length&&OAM.script(OAM.scripts.slider).wait((function(){e.each((function(){var e=$(this),t={group:e.data("slider"),ajax:e.data("slider-ajax"),ajaxEndpoint:e.data("slider-ajax-endpoint")};e.roam_slider(t),Cookies.set("maxSlides_"+t.group,Math.ceil(e.roam_slider("visibleSlides")))}))}))})),OAM.ready((function(){arriveEach("[data-header-nav]",(function(){function e(){var e=i.find(".header-nav__inner"),t=i.find(".header-nav__inner__item--businesses"),n=e.offset().left+e.innerWidth();i.removeClass("header-nav--initialised").find(".header-nav__inner__item--hidden").removeClass("header-nav__inner__item--hidden");var o=i.find(".header-nav__inner__item").filter(":not(.header-nav__inner__item--all)").filter(":not(.header-nav__inner__item--businesses)").get().reverse();$(o).each((function(){t.offset().left+t.innerWidth()>n&&$(this).addClass("header-nav__inner__item--hidden")})),i.addClass("header-nav--initialised")}var i=$(this);e(),$(window).on("resize",$.debounceLast(25,e))}))})),(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"function"==typeof require?e(require("jquery")):e(jQuery)})((function(g){var o={escapeRegExChars:function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},n=27,i=9,r=13,a=38,s=39,l=40,e=g.noop;function c(e,t){var n=this;n.element=e,n.el=g(e),n.suggestions=[],n.badQueries=[],n.selectedIndex=-1,n.currentValue=n.element.value,n.timeoutId=null,n.cachedResponse={},n.onChangeTimeout=null,n.onChange=null,n.isLocal=!1,n.suggestionsContainer=null,n.noSuggestionsContainer=null,n.options=g.extend(!0,{},c.defaults,t),n.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},n.hint=null,n.hintValue="",n.selection=null,n.initialize(),n.setOptions(t)}c.utils=o,(g.Autocomplete=c).defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:function(e,t){if(!t)return e.value;var n="("+o.escapeRegExChars(t)+")";return e.value.replace(new RegExp(n,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},formatGroup:function(e,t){return'<div class="autocomplete-group">'+t+"</div>"},delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:e,onSearchComplete:e,onSearchError:e,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,n){return-1!==e.value.toLowerCase().indexOf(n)},paramName:"query",transformResult:function(e){return"string"==typeof e?g.parseJSON(e):e},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1},c.prototype={initialize:function(){var e,t=this,n="."+t.classes.suggestion,o=t.classes.selected,i=t.options;t.element.setAttribute("autocomplete","off"),t.noSuggestionsContainer=g('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),t.suggestionsContainer=c.utils.createNode(i.containerClass),(e=g(t.suggestionsContainer)).appendTo(i.appendTo||"body"),"auto"!==i.width&&e.css("width",i.width),e.on("mouseover.autocomplete",n,(function(){t.activate(g(this).data("index"))})),e.on("mouseout.autocomplete",(function(){t.selectedIndex=-1,e.children("."+o).removeClass(o)})),e.on("click.autocomplete",n,(function(){t.select(g(this).data("index"))})),e.on("click.autocomplete",(function(){clearTimeout(t.blurTimeoutId)})),t.fixPositionCapture=function(){t.visible&&t.fixPosition()},g(window).on("resize.autocomplete",t.fixPositionCapture),t.el.on("keydown.autocomplete",(function(e){t.onKeyPress(e)})),t.el.on("keyup.autocomplete",(function(e){t.onKeyUp(e)})),t.el.on("blur.autocomplete",(function(){t.onBlur()})),t.el.on("focus.autocomplete",(function(){t.onFocus()})),t.el.on("change.autocomplete",(function(e){t.onKeyUp(e)})),t.el.on("input.autocomplete",(function(e){t.onKeyUp(e)}))},onFocus:function(){var e=this;e.disabled||(e.fixPosition(),e.el.val().length>=e.options.minChars&&e.onValueChange())},onBlur:function(){var e=this,t=e.options,n=e.el.val(),o=e.getQuery(n);e.blurTimeoutId=setTimeout((function(){e.hide(),e.selection&&e.currentValue!==o&&(t.onInvalidateSelection||g.noop).call(e.element)}),200)},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(e){var t=this,n=g.extend({},t.options,e);t.isLocal=Array.isArray(n.lookup),t.isLocal&&(n.lookup=t.verifySuggestionsFormat(n.lookup)),n.orientation=t.validateOrientation(n.orientation,"bottom"),g(t.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex}),this.options=n},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearTimeout(this.onChangeTimeout),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var e,t,n,o,i,r,a,s,l,c,u,d=this,f=g(d.suggestionsContainer),h=f.parent().get(0);h!==document.body&&!d.options.forceFixPosition||(l=d.options.orientation,e=f.outerHeight(),t=d.el.outerHeight(),o={top:(n=d.el.offset()).top,left:n.left},"auto"===l&&(i=g(window).height(),a=-(r=g(window).scrollTop())+n.top-e,s=r+i-(n.top+t+e),l=Math.max(a,s)===a?"top":"bottom"),o.top+="top"===l?-e:t,h!==document.body&&(c=f.css("opacity"),d.visible||f.css("opacity",0).show(),u=f.offsetParent().offset(),o.top-=u.top,o.top+=h.scrollTop,o.left-=u.left,d.visible||f.css("opacity",c).hide()),"auto"===d.options.width&&(o.width=d.el.outerWidth()+"px"),f.css(o))},isCursorAtEnd:function(){var e,t=this.el.val().length,n=this.element.selectionStart;return"number"==typeof n?n===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==l||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case n:t.el.val(t.currentValue),t.hide();break;case s:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case i:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case r:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case a:t.moveUp();break;case l:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case a:case l:return}clearTimeout(t.onChangeTimeout),t.currentValue!==t.el.val()&&(t.findBestHint(),0<t.options.deferRequestBy?t.onChangeTimeout=setTimeout((function(){t.onValueChange()}),t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var e,t,n,o;this.ignoreValueChange?this.ignoreValueChange=!1:(t=(e=this).options,n=e.el.val(),o=e.getQuery(n),e.selection&&e.currentValue!==o&&(e.selection=null,(t.onInvalidateSelection||g.noop).call(e.element)),clearTimeout(e.onChangeTimeout),e.currentValue=n,e.selectedIndex=-1,t.triggerSelectOnValidInput&&e.isExactMatch(o)?e.select(0):o.length<t.minChars?e.hide():e.getSuggestions(o))},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(e){var t,n=this.options.delimiter;return n?(t=e.split(n),g.trim(t[t.length-1])):e},getSuggestionsLocal:function(t){var e=this.options,n=t.toLowerCase(),o=e.lookupFilter,i=parseInt(e.lookupLimit,10),r={suggestions:g.grep(e.lookup,(function(e){return o(e,t,n)}))};return i&&r.suggestions.length>i&&(r.suggestions=r.suggestions.slice(0,i)),r},getSuggestions:function(o){var e,t,n,i,r=this,a=r.options,s=a.serviceUrl;a.params[a.paramName]=o,!1!==a.onSearchStart.call(r.element,a.params)&&(t=a.ignoreParams?null:a.params,g.isFunction(a.lookup)?a.lookup(o,(function(e){r.suggestions=e.suggestions,r.suggest(),a.onSearchComplete.call(r.element,o,e.suggestions)})):(e=r.isLocal?r.getSuggestionsLocal(o):(g.isFunction(s)&&(s=s.call(r.element,o)),n=s+"?"+g.param(t||{}),r.cachedResponse[n]))&&Array.isArray(e.suggestions)?(r.suggestions=e.suggestions,r.suggest(),a.onSearchComplete.call(r.element,o,e.suggestions)):r.isBadQuery(o)?a.onSearchComplete.call(r.element,o,[]):(r.abortAjax(),i={url:s,data:t,type:a.type,dataType:a.dataType},g.extend(i,a.ajaxSettings),r.currentRequest=g.ajax(i).done((function(e){var t;r.currentRequest=null,t=a.transformResult(e,o),r.processResponse(t,o,n),a.onSearchComplete.call(r.element,o,t.suggestions)})).fail((function(e,t,n){a.onSearchError.call(r.element,o,e,t,n)}))))},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,n=t.length;n--;)if(0===e.indexOf(t[n]))return!0;return!1},hide:function(){var e=this,t=g(e.suggestionsContainer);g.isFunction(e.options.onHide)&&e.visible&&e.options.onHide.call(e.element,t),e.visible=!1,e.selectedIndex=-1,clearTimeout(e.onChangeTimeout),g(e.suggestionsContainer).hide(),e.signalHint(null)},suggest:function(){var e,i,r,a,s,l,t,n,o,c,u,d;this.suggestions.length?(i=(e=this).options,r=i.groupBy,a=i.formatResult,s=e.getQuery(e.currentValue),l=e.classes.suggestion,t=e.classes.selected,n=g(e.suggestionsContainer),o=g(e.noSuggestionsContainer),c=i.beforeRender,u="",i.triggerSelectOnValidInput&&e.isExactMatch(s)?e.select(0):(g.each(e.suggestions,(function(e,t){var n,o;r&&(u+=(o=(n=t).data[r],d===o?"":(d=o,i.formatGroup(n,d)))),u+='<div class="'+l+'" data-index="'+e+'">'+a(t,s,e)+"</div>"})),this.adjustContainerWidth(),o.detach(),n.html(u),g.isFunction(c)&&c.call(e.element,n,e.suggestions),e.fixPosition(),n.show(),i.autoSelectFirst&&(e.selectedIndex=0,n.scrollTop(0),n.children("."+l).first().addClass(t)),e.visible=!0,e.findBestHint())):this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var e=this,t=e.options.beforeRender,n=g(e.suggestionsContainer),o=g(e.noSuggestionsContainer);this.adjustContainerWidth(),o.detach(),n.empty(),n.append(o),g.isFunction(t)&&t.call(e.element,n,e.suggestions),e.fixPosition(),n.show(),e.visible=!0},adjustContainerWidth:function(){var e,t=this.options,n=g(this.suggestionsContainer);"auto"===t.width?(e=this.el.outerWidth(),n.css("width",0<e?e:300)):"flex"===t.width&&n.css("width","")},findBestHint:function(){var o=this.el.val().toLowerCase(),i=null;o&&(g.each(this.suggestions,(function(e,t){var n=0===t.value.toLowerCase().indexOf(o);return n&&(i=t),!n})),this.signalHint(i))},signalHint:function(e){var t="",n=this;e&&(t=n.currentValue+e.value.substr(n.currentValue.length)),n.hintValue!==t&&(n.hintValue=t,n.hint=e,(this.options.onHint||g.noop)(t))},verifySuggestionsFormat:function(e){return e.length&&"string"==typeof e[0]?g.map(e,(function(e){return{value:e,data:null}})):e},validateOrientation:function(e,t){return e=g.trim(e||"").toLowerCase(),-1===g.inArray(e,["auto","bottom","top"])&&(e=t),e},processResponse:function(e,t,n){var o=this,i=o.options;e.suggestions=o.verifySuggestionsFormat(e.suggestions),i.noCache||(o.cachedResponse[n]=e,i.preventBadQueries&&!e.suggestions.length&&o.badQueries.push(t)),t===o.getQuery(o.currentValue)&&(o.suggestions=e.suggestions,o.suggest())},activate:function(e){var t,n=this,o=n.classes.selected,i=g(n.suggestionsContainer),r=i.find("."+n.classes.suggestion);return i.find("."+o).removeClass(o),n.selectedIndex=e,-1!==n.selectedIndex&&r.length>n.selectedIndex?(t=r.get(n.selectedIndex),g(t).addClass(o),t):null},selectHint:function(){var e=g.inArray(this.hint,this.suggestions);this.select(e)},select:function(e){this.hide(),this.onSelect(e)},moveUp:function(){var e=this;if(-1!==e.selectedIndex)return 0===e.selectedIndex?(g(e.suggestionsContainer).children("."+e.classes.suggestion).first().removeClass(e.classes.selected),e.selectedIndex=-1,e.ignoreValueChange=!1,e.el.val(e.currentValue),void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var t,n,o,i,r=this,a=r.activate(e);a&&(t=g(a).outerHeight(),n=a.offsetTop,i=(o=g(r.suggestionsContainer).scrollTop())+r.options.maxHeight-t,n<o?g(r.suggestionsContainer).scrollTop(n):i<n&&g(r.suggestionsContainer).scrollTop(n-r.options.maxHeight+t),r.options.preserveInput||(r.ignoreValueChange=!0,r.el.val(r.getValue(r.suggestions[e].value))),r.signalHint(null))},onSelect:function(e){var t=this,n=t.options.onSelect,o=t.suggestions[e];t.currentValue=t.getValue(o.value),t.currentValue===t.el.val()||t.options.preserveInput||t.el.val(t.currentValue),t.signalHint(null),t.suggestions=[],t.selection=o,g.isFunction(n)&&n.call(t.element,o)},getValue:function(e){var t,n,o=this.options.delimiter;return!o||1===(n=(t=this.currentValue).split(o)).length?e:t.substr(0,t.length-n[n.length-1].length)+e},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),g(window).off("resize.autocomplete",this.fixPositionCapture),g(this.suggestionsContainer).remove()}},g.fn.devbridgeAutocomplete=function(n,o){var i="autocomplete";return arguments.length?this.each((function(){var e=g(this),t=e.data(i);"string"==typeof n?t&&"function"==typeof t[n]&&t[n](o):(t&&t.dispose&&t.dispose(),t=new c(this,n),e.data(i,t))})):this.first().data(i)},g.fn.autocomplete||(g.fn.autocomplete=g.fn.devbridgeAutocomplete)})),OAM.ready((function(){arriveEach("[data-autocomplete]",(function(){$(this).one("focus",(function(){var t=$(this),e={deferRequestBy:400,noCache:!0,minChars:2,beforeRender:function(e,t){var n=$(e);$.each(t,(function(e,t){t.data.class&&n.find(".autocomplete-suggestion:eq("+e+")").addClass(t.data.class)}))},onSelect:function(e){e.data.url?window.location.href=e.data.url:t.closest("form").trigger("submit")},serviceUrl:t.data("url")};t.autocomplete(e)}))}))})),OAM.ready((function(){arriveEach("[data-menu-nav-toggle]",(function(){$(this).on("click",(function(e){e.preventDefault(),$("body").toggleClass("modal-open").toggleClass("menu-open")}))}))})),OAM.ready((function(){$(".workflow-action").bind("ajax:success",(function(e,t,n,o){window.location.reload()})).bind("ajax:error",(function(e,t,n,o){var i=dot2val.get(t,"responseJSON");console.error(o,i)})).fadeIn(),$(".modal-workflow").on("show.bs.modal",(function(e){function n(){var t,n,o,e,i;a.find("form").attr("action",r.data("url")).find('[name="action"]').val(r.data("action")),r.data("params")&&$.each(r.data("params"),(function(e,t){a.find('[name="'+e+'"]').val(t).change()})),r.data("confirm-value")&&(t=a.find("#confirmation"),n=a.find(".submit"),o=r.data("confirmValue"),a.find(".confirm_on").text(o),t.on("keyup",(function(e){n.prop("disabled",t.val()!==o)}))),r.data("modal-title")&&(e=r.data("modalTitle"),i=r.data("modalDescription"),a.find(".modal-title").html(e),a.find(".modal-description").html(i))}var r=$(e.relatedTarget),a=$(this),t=r.data("template");t?$.ajax({type:"POST",url:"/ajax/workflow-view/"+t,data:JSON.stringify({entityId:r.data("entityId"),entityType:r.data("entityType")}),contentType:"application/json",dataType:"html"}).done((function(e){var t=$(e);a.find(".modal-content").html(t.find(".modal-content").html()),n()})):n()})).on("submit","form",(function(e){var t;"confirmation"===$(this).closest(".modal").attr("data-type")&&(t=$(this),e.preventDefault(),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),success:function(){$(this).closest(".modal").modal("hide"),window.location.reload()},error:function(e){console.error(e)}}))})).on("ajax:success",(function(){$(this).closest(".modal").modal("hide"),window.location.reload()}));var a=$("[data-workflow-mass-action-select-all]"),s=$("[data-workflow-mass-action-item]");$("[data-workflow-mass-action]").on("submit",(function(e){e.preventDefault();var t=$(e.target),n=t.find("button"),o=n.html(),i=s.filter(":checked"),r=i.map((function(e,t){return $(t).val()})).toArray().join(",");t.find(':input[name="ids"]').val(r),t.find(':input[name="action"]').val()&&t.find(':input[name="ids"]').val()?($.ajax(t.attr("action"),{method:t.attr("method"),data:t.serializeArray()}).fail((function(e){i.prop("checked",!1),a.prop("checked",!1),s.prop("disabled",!1),t.prop("disabled",!1).find("button, :input").prop("disabled",!1).filter("button"),n.html(o)})).done((function(){window.location.reload(!0)})),s.prop("disabled",!0),t.prop("disabled",!0).find("button, :input").prop("disabled",!0),n.html(n.data("disable-with"))):e.stopPropagation()})),a.on("change",(function(e){var t=$(e.target);$("[data-workflow-mass-action-item]").prop("checked",t.is(":checked"))}))}));